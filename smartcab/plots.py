import matplotlib.pyplot as plt

deadlines = [20, 45, 25, 30, 25, 25, 30, 35, 30, 50, 20, 30, 25, 25, 35, 55, 20, 40, 25, 45, 25, 30, 45, 55, 45, 30, 30, 30, 30, 20, 25, 25, 30, 20, 20, 20, 35, 35, 20, 30, 40, 35, 30, 35, 40, 25, 25, 20, 25, 25, 30, 40, 45, 40, 35, 40, 25, 30, 25, 40, 30, 20, 30, 40, 30, 20, 20, 45, 20, 35, 30, 20, 25, 30, 35, 35, 35, 25, 35, 25, 30, 20, 35, 35, 30, 25, 30, 25, 20, 30, 20, 25, 20, 40, 35, 35, 45, 30, 30]
steps_bench = [8, 31, 14, 10, 7, 16, 2, 17, 17, 22, 12, 13, 10, 13, 12, 25, 7, 13, 13, 13, 10, 13, 21, 32, 21, 13, 17, 12, 10, 13, 11, 14, 16, 7, 11, 5, 10, 25, 16, 12, 20, 17, 16, 8, 13, 7, 11, 7, 12, 12, 15, 26, 16, 20, 26, 21, 16, 11, 8, 19, 9, 10, 16, 9, 10, 4, 11, 21, 4, 10, 13, 8, 12, 9, 5, 17, 11, 5, 16, 9, 11, 12, 3, 12, 19, 8, 8, 16, 9, 9, 16, 8, 10, 22, 29, 11, 19, 11, 6]
steps_random = [15, 46, 26, 31, 26, 26, 31, 23, 31, 51, 21, 31, 26, 26, 36, 56, 15, 41, 26, 22, 12, 31, 46, 33, 43, 31, 31, 25, 15, 21, 26, 26, 31, 21, 15, 21, 36, 34, 21, 31, 41, 36, 31, 36, 41, 26, 26, 21, 26, 26, 31, 41, 31, 41, 36, 41, 26, 31, 26, 41, 31, 18, 31, 41, 31, 18, 21, 5, 21, 36, 7, 21, 26, 31, 11, 36, 36, 26, 36, 26, 31, 21, 19, 36, 31, 26, 26, 26, 21, 31, 21, 21, 21, 23, 16, 16, 46, 22, 31]
rewards_bench = [22, 50, 29, 26, 22, 31, 14, 34, 33, 42, 26, 29, 25, 30, 29, 46, 21, 31, 28, 32, 25, 31, 42, 53, 40, 29, 35, 30, 26, 27, 26, 31, 32, 21, 25, 19, 27, 42, 30, 28, 38, 34, 32, 25, 31, 22, 26, 21, 27, 27, 31, 44, 35, 38, 43, 39, 31, 27, 23, 37, 25, 24, 32, 27, 26, 18, 25, 40, 18, 27, 29, 22, 27, 25, 18, 34, 28, 20, 33, 24, 27, 26, 16, 29, 35, 23, 24, 31, 23, 25, 30, 23, 24, 40, 46, 28, 38, 27, 22]
rewards_random = [14.0, 31.0, 14.5, 13.5, 21.0, 5.0, 16.0, 20.5, 14.0, 22.0, 1.0, 7.5, 8.0, 8.0, 12.0, 25.5, 22.0, 22.5, 14.0, 15.5, 22.5, 12.5, 25.5, 32.0, 29.0, 11.5, 24.5, 27.0, 15.5, 3.0, 21.0, 25.5, 16.5, 2.5, 25.5, 6.0, 10.0, 19.5, 0.5, 14.5, 15.0, 20.0, 17.5, 21.0, 7.0, 17.5, 13.5, 9.5, 9.0, 7.5, 25.5, 24.5, 13.0, 18.0, 20.0, 22.5, 7.0, 8.5, 15.5, 11.5, 15.5, 18.0, 19.0, 25.0, 12.0, 23.5, 12.5, 17.0, 12.0, 17.5, 17.5, 11.5, 7.5, 11.5, 20.5, 22.5, 27.5, 11.5, 8.5, 7.0, 19.5, 13.5, 22.0, 16.5, 12.5, 14.5, 27.0, 4.0, 12.5, 13.0, 10.0, 18.0, 15.0, 25.5, 15.5, 22.0, 25.0, 26.0, 19.0]

# # \tau=0.5, \gamma=0.2, \alpha=(1-x)^2
# steps = [21, 46, 26, 31, 26, 26, 3, 36, 31, 51, 18, 27, 19, 8, 17, 31, 7, 24, 13, 42, 23, 21, 36, 22, 12, 22, 24, 22, 10, 15, 13, 25, 31, 21, 11, 8, 28, 16, 14, 7, 25, 13, 18, 13, 20, 11, 22, 21, 9, 8, 8, 23, 22, 41, 19, 41, 10, 24, 6, 41, 29, 13, 14, 8, 27, 8, 18, 38, 17, 18, 8, 13, 15, 22, 5, 19, 20, 26, 13, 26, 21, 12, 5, 36, 13, 5, 21, 13, 9, 31, 21, 5, 16, 12, 36, 20, 19, 11, 13]
# rewards = [0, 11.0, 41.5, 30.5, 36.5, 22.0, 22.5, 15, 43.5, 39.0, 60.0, 34.0, 44.5, 36.5, 25, 32.0, 51.5, 21, 45.5, 26.5, 72.5, 45.5, 39.5, 66.0, 39.0, 28.0, 40.0, 38.0, 40.5, 26, 27.5, 28.5, 43.0, 37.5, 39.5, 25, 22, 48.5, 33.5, 26.5, 23, 43.5, 23.0, 32.5, 26.5, 40.0, 25.5, 36.5, 28.0, 22.5, 23, 18.5, 40.5, 37.0, 49.5, 36.0, 50.5, 25, 39.5, 21, 49.0, 50.0, 25.5, 31.0, 24.5, 49.5, 22, 35.0, 60.0, 32.0, 33.5, 20.5, 28.0, 31.5, 39.5, 18, 37.5, 38.0, 37.5, 31.0, 40.0, 45.0, 27.0, 17.0, 48.0, 25.5, 20, 38.0, 27.0, 24.0, 50.0, 28.5, 20, 30.5, 25.0, 50.5, 38.5, 38.5, 27]

# # \tau=0.5, \gamma=0., \alpha=(1-x)^2
# steps = [21, 31, 8, 12, 26, 6, 11, 17, 14, 51, 10, 21, 9, 14, 12, 37, 5, 19, 13, 25, 8, 11, 26, 19, 40, 31, 11, 19, 31, 14, 17, 26, 16, 19, 21, 5, 19, 32, 21, 20, 41, 13, 31, 8, 19, 26, 12, 16, 14, 12, 9, 6, 11, 9, 16, 6, 25, 17, 16, 31, 21, 20, 9, 25, 16, 4, 14, 12, 4, 19, 27, 12, 14, 12, 12, 36, 17, 5, 20, 20, 11, 16, 36, 12, 10, 6, 8, 16, 20, 26, 16, 9, 17, 41, 36, 21, 15, 15, 12]
# rewards = [0, 10.5, 42.5, 20.0, 23.0, 31.5, 18.0, 19, 31.5, 28, 61.0, 22.5, 38.5, 26.5, 28.0, 31.5, 58.0, 17.5, 36.0, 27.5, 45.0, 18.0, 24.5, 45.5, 35.0, 66.5, 36.5, 29, 36.0, 39.0, 31.0, 34.0, 32.0, 30, 38.5, 26.0, 19, 37.5, 51.0, 25.5, 41.0, 62.0, 30, 38.0, 23.5, 38.0, 30.0, 27, 32.0, 28.5, 27, 23.5, 18.5, 23.5, 22.5, 31.5, 17.0, 43.5, 36.0, 33.5, 51.0, 39.0, 38.0, 25, 50.5, 34.5, 18, 30.5, 28.0, 18, 37.5, 46.5, 28.5, 28.5, 25.5, 26.0, 49.0, 33.0, 20, 36.5, 37.5, 26.0, 28.5, 55.0, 29, 20.5, 18.0, 24, 33.5, 34.0, 47.0, 32.5, 23.5, 36.0, 52.0, 48.5, 39.0, 29.5, 28.5, 28.5]

# # \tau=10, \gamma=0., \alpha=(1-x)^2
# steps = [13, 22, 26, 31, 17, 26, 22, 36, 4, 51, 21, 31, 26, 26, 36, 52, 21, 26, 26, 26, 8, 31, 26, 56, 46, 31, 31, 31, 25, 21, 15, 6, 31, 21, 21, 21, 36, 19, 21, 21, 20, 20, 31, 36, 41, 26, 26, 18, 26, 26, 31, 41, 46, 41, 36, 41, 26, 31, 26, 41, 31, 21, 31, 41, 31, 21, 21, 11, 21, 36, 31, 20, 26, 31, 36, 36, 36, 26, 36, 26, 31, 21, 12, 8, 7, 26, 31, 22, 8, 31, 15, 26, 21, 41, 36, 36, 46, 25, 31]
# rewards = [0, 13.0, 20.0, 8.5, 22.0, 17.5, 11.0, 26.0, 11.5, 13.5, 45.5, 11.0, 22.0, 20.0, 16.5, 24.0, 42.0, 11.0, 21.0, 6.0, 30.0, 16.0, 18.5, 29.5, 28.5, 18.5, 23.0, 24.0, 16.5, 19.0, 5.0, 18.0, 9.5, 11.0, 4.5, 11.5, 11.5, 20.5, 21.5, 10.5, 29.0, 23.0, 26.0, 17.0, 25.5, 26.0, 19.0, 24.0, 22.0, 18.5, 15.0, 20.0, 15.0, 32.5, 24.5, 12.0, 33.0, 8.0, 16.0, 13.5, 9.0, 9.5, 12.0, 20.0, 20.0, 25.5, 15.5, 17.5, 14.0, 8.0, 24.0, 20.5, 18.0, 16.0, 11.0, 22.0, 23.5, 26.5, 22.5, 17.5, 15.5, 24.0, 10.0, 16.0, 22.0, 15.5, 15.5, 25.5, 20.5, 18, 27.0, 27.0, 14.5, 9.5, 30.0, 26.0, 29.5, 21.5, 33.5, 19.5]

# # \tau=0.1, \gamma=0., \alpha=(1-x)^2
# steps = [21, 46, 26, 31, 26, 26, 6, 36, 31, 51, 21, 31, 26, 26, 36, 56, 21, 41, 26, 46, 26, 31, 46, 56, 46, 31, 31, 31, 31, 21, 26, 26, 31, 21, 21, 21, 36, 36, 21, 31, 41, 36, 31, 36, 41, 26, 26, 21, 26, 26, 31, 41, 46, 41, 36, 41, 26, 31, 26, 41, 31, 21, 31, 41, 31, 21, 21, 46, 21, 36, 31, 21, 26, 31, 36, 36, 36, 26, 36, 26, 31, 21, 36, 36, 31, 26, 31, 26, 21, 31, 21, 26, 21, 41, 36, 36, 46, 31, 31]
# rewards = [0, 11.5, 46, 26.5, 32.5, 26, 25.5, 18, 35.5, 30.5, 50.5, 20.5, 30.5, 27.5, 27.5, 37.5, 53.5, 21.5, 39.5, 26.5, 46.5, 25.5, 32.5, 47.5, 53.5, 45.5, 29, 32.5, 32.5, 33, 21.5, 25.5, 29, 32.0, 21, 21, 23.5, 36, 35.5, 20.5, 30.5, 40.5, 39, 31, 35.5, 42.5, 25.5, 25.5, 20.5, 25.5, 25.5, 30.5, 40.5, 46.0, 41.5, 35.5, 40.5, 26, 30.5, 25.5, 41.5, 31.5, 21, 31.5, 42.5, 31.5, 20.5, 20.5, 46, 22.5, 37.5, 31, 20.5, 26, 32.5, 37.5, 37.5, 35.5, 27.5, 36.5, 25.5, 31.5, 20.5, 37.5, 35.5, 30.5, 25.5, 31.5, 26, 21.5, 31, 20.5, 26.5, 20.5, 40.5, 36, 36.5, 46.5, 31.5, 31.5]

# # \tau=0.4, \gamma=0., \alpha=(1-x)^2
# steps = [21, 46, 26, 31, 12, 26, 2, 34, 22, 30, 19, 28, 17, 17, 16, 30, 4, 24, 13, 46, 14, 13, 25, 33, 15, 8, 12, 17, 12, 21, 26, 11, 12, 21, 21, 11, 36, 27, 21, 17, 33, 11, 19, 18, 28, 12, 19, 10, 6, 22, 13, 38, 19, 8, 14, 21, 26, 18, 7, 19, 15, 16, 18, 27, 17, 11, 16, 17, 11, 21, 6, 9, 8, 16, 21, 17, 11, 17, 19, 16, 6, 7, 4, 36, 31, 5, 24, 13, 11, 12, 8, 8, 10, 22, 22, 19, 25, 18, 18]
# rewards = [0, 11.0, 41.5, 27.5, 32.5, 24.5, 25.5, 14, 45.0, 39.5, 51.5, 38.5, 47.5, 37.5, 37.5, 33.5, 52.0, 18, 43.5, 27.5, 63.5, 31.5, 32.0, 49.5, 56.0, 31.0, 24, 27.0, 33.5, 30.5, 40.0, 30.5, 28, 30.5, 31.5, 29.5, 26.0, 51.5, 42.5, 35.5, 33.5, 58.0, 28, 35.5, 35, 51.5, 29.5, 41.5, 24, 21, 40.0, 30.0, 64.5, 36.5, 20.5, 29.5, 40.0, 46.0, 35.5, 20.5, 37.5, 31.5, 30.0, 34.5, 46.5, 38.0, 26.0, 31.5, 35.5, 26.0, 39.0, 18.5, 23, 21.5, 32.5, 41.0, 34, 28, 32.0, 37.0, 30.0, 22, 19.5, 17, 49.5, 54.0, 20, 45.5, 30.5, 24.0, 26.5, 24.5, 23, 26.5, 43.0, 40.5, 41.0, 42.5, 33.5, 36.5]

# # \tau=0.4, \gamma=0., \alpha=cos(pi*x/2)^3
# steps = [21, 46, 26, 31, 12, 26, 2, 34, 22, 30, 19, 28, 17, 17, 16, 30, 4, 24, 13, 24, 26, 13, 35, 21, 19, 22, 11, 10, 31, 11, 17, 14, 8, 11, 11, 4, 8, 36, 6, 31, 12, 22, 26, 9, 26, 10, 14, 7, 23, 26, 19, 9, 22, 15, 23, 28, 7, 21, 8, 41, 13, 8, 14, 41, 16, 6, 20, 46, 17, 9, 28, 17, 10, 15, 3, 36, 15, 16, 25, 9, 16, 7, 7, 31, 31, 11, 16, 19, 8, 8, 6, 5, 21, 25, 20, 21, 11, 31, 13]
# rewards = [0, 11.0, 41.5, 27.5, 32.5, 24.5, 25.5, 14, 45.0, 39.5, 51.5, 38.5, 47.5, 37.5, 37.5, 33.5, 52.0, 18, 43.5, 27.5, 48.0, 31.0, 32.0, 60.5, 31.5, 40.5, 39.0, 29, 26.5, 43.5, 25.5, 33.5, 33.5, 22.5, 25.5, 24.5, 18, 23.5, 51.0, 19.0, 46.5, 24.0, 39.5, 45.5, 24.5, 45.0, 27.5, 29, 21, 43.5, 35.5, 40.5, 21.5, 42.0, 29.5, 41.0, 46.5, 20.5, 38.0, 23, 56.5, 28.5, 23.0, 30.5, 56.5, 34.5, 20, 34.5, 59.5, 35.0, 26.5, 46.0, 27, 25, 30.5, 16, 48.5, 31.5, 34.5, 47.0, 25.0, 32, 19.5, 20.5, 52.0, 41.5, 28.5, 33.0, 37.5, 24.5, 22.5, 20, 20, 29.0, 40.0, 39.0, 39.0, 26.5, 39.5, 28.0]

# \tau=0.4, \gamma=0., \alpha=(1-x)^2 STATE SPACE 2
steps = [21, 46, 26, 31, 26, 25, 7, 36, 26, 51, 21, 31, 26, 16, 10, 25, 4, 12, 17, 14, 8, 25, 23, 13, 21, 31, 13, 10, 19, 13, 18, 26, 25, 8, 21, 5, 18, 17, 13, 17, 12, 18, 11, 19, 21, 7, 11, 8, 12, 23, 10, 5, 25, 24, 36, 21, 26, 11, 8, 27, 15, 11, 23, 41, 8, 5, 20, 11, 4, 26, 21, 13, 5, 13, 5, 32, 21, 18, 31, 26, 11, 7, 4, 17, 31, 12, 21, 11, 4, 13, 19, 5, 16, 23, 14, 22, 46, 29, 20]
rewards = [0, 11.0, 43.0, 26.5, 30.0, 22.5, 39.5, 19, 44.5, 44.0, 60.5, 26.0, 35.0, 32.0, 32.0, 27, 48.5, 18, 28.5, 33.0, 33, 23.5, 49.0, 45.0, 29.0, 38.5, 55.0, 29.5, 25.0, 38.0, 30.5, 33.5, 38.0, 46.0, 22.5, 24.0, 19, 34.5, 37.5, 30.0, 38.0, 30, 35.5, 27, 34, 40.0, 22, 26, 22, 27, 42.0, 24.5, 17.5, 43.0, 48.5, 58.0, 40.5, 33.5, 27, 23, 47.0, 34.0, 25.5, 41.0, 53.0, 19.0, 19, 39.5, 25.5, 18, 47.0, 38.0, 32.0, 20, 29, 18, 51.0, 38.5, 34.0, 53.0, 47.0, 27, 19.5, 17, 37.0, 39.5, 29.5, 40.0, 24.5, 16.5, 27.5, 38.5, 20, 33.5, 37.0, 31.5, 40.0, 64.0, 50.5, 35.0]

###############################################################################

steps_frac = []
for x in range(99):
  steps_frac.append(steps[x]/float(deadlines[x]))

steps_bench_frac = []
for x in range(99):
  steps_bench_frac.append(steps_bench[x]/float(deadlines[x]))

diff_rewards = []
for x in range(99):
  diff_rewards.append((rewards_bench[x]/steps_bench[x])-(rewards[x]/steps[x]))

acc_tot = 0
for x in range(99):
  if steps[x] <= deadlines[x]:
    acc_tot+=1
acc_70 = 0
for x in range(15,99):
  if steps[x] <= deadlines[x]:
    acc_70+=1
print "Total accuracy: {}".format(acc_tot/99.)
print "85 run accuracy: {}".format(acc_70/84.)

rew_scaled = []
rew_bench_scaled = []
rew_random_scaled = []
for x in range(99):
  rew_scaled.append(rewards[x]/steps[x])
  rew_bench_scaled.append(rewards_bench[x]/steps_bench[x])
  rew_random_scaled.append(rewards_random[x]/steps_random[x])

###############################################################################

plt.subplot(211)
plt.plot(steps_bench, 'b^',label='Benchmark')
plt.plot(steps_random, 'rs', label='Random')
plt.plot(deadlines,'y-',label='Deadlines')
plt.plot(steps,'g*',label='Model')
plt.legend(bbox_to_anchor=(0., 1.02, 1., .102), loc=3, ncol=4, mode="expand", borderaxespad=0.)
plt.axhline(y = sum(steps)/99, color='green')
plt.axhline(y = sum(steps_bench)/99, color='blue')
plt.axhline(y = sum(steps_random)/99, color='red')
plt.xlabel('Trial number')
plt.ylabel('Steps taken')

plt.subplot(212)
plt.plot(rew_scaled, 'g*',label='Model')
plt.plot(rew_bench_scaled, 'b^',label='Benchmark')
plt.plot(rew_random_scaled
  , 'rs',label='Random')
plt.axhline(y = sum(rew_scaled)/99, color='green')
plt.axhline(y = sum(rew_bench_scaled)/99, color='blue')
plt.axhline(y = sum(rew_random_scaled)/99, color='red')
plt.xlabel('Trial number')
plt.ylabel('Total rewards')

plt.savefig('figure_7_1')
plt.clf()
# plt.show()

plt.subplot(211)
plt.plot(steps_frac,'g-o', label='Model')
plt.plot(steps_bench_frac,'y', label='Benchmark')
plt.axhline(y=1, color='black')
plt.legend(bbox_to_anchor=(0., 1.02, 1., .102), loc=3, ncol=2, mode="expand", borderaxespad=0.)
plt.xlabel('Trial number')
plt.ylabel('Steps/max_deadline')

plt.subplot(212)
plt.plot(diff_rewards,'g-o')
plt.axhline(y=0)
plt.xlabel('Trial number')
plt.ylabel('Rewards - bench_rewards')

plt.savefig('figure_7_2')
# plt.show()

